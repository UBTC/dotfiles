"View the commit you are about to commit as diff
function! GitViewCommit(browse)
    rightbelow new
    silent! setlocal filetype=diff bufhidden=delete nobackup noswapfile nobuflisted nowrap buftype=nofile
    exec "normal :%! git diff -p --stat --cached \r"
    setlocal nomodifiable
    noremap <buffer> q :bwipeout<cr>
    if ! a:browse
        wincmd p "Move to edit
    endif
endfunction

imap ,f [Fix]
imap ,r [Refactor]
imap ,a [Add]
imap _f [Format] Formatted codebase.

nnoremap <Leader>vd :call GitViewCommit(0)<cr>
nnoremap <Leader>bd :call GitViewCommit(1)<cr>
