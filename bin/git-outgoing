#!/bin/zsh

emulate zsh

CURRENT_BRANCH="$(git branch | grep '^*' | sed s/\*\ //)"

if [[ "${CURRENT_BRANCH}" != "" ]] {
    TARGET="${1}"
    if [[ "${TARGET}" == "" ]] {
        TRACKING_REPOSITORY="$(git config branch.${CURRENT_BRANCH}.remote)"

    if [[ "${TRACKING_REPOSITORY}" != "" ]] {
        REMOTE_REPOSITORY="${TRACKING_REPOSITORY}"
        REMOTE_BRANCH="$(git config branch.${CURRENT_BRANCH}.merge | cut -d"/" -f3)"
        TARGET="${REMOTE_REPOSITORY}/${REMOTE_BRANCH}"
        git fetch ${REMOTE_REPOSITORY} ${REMOTE_BRANCH}

        git log ${TARGET}..
      }
    }
}
